# Bash 的模式扩展

| 选项 | 含义 | 备注 | 其他 |
|:---|:---|:---|:---|
| ~ | 波浪线扩展 | 扩展成当前用户的主目录 | echo ~root # 返回 root 用户的主目录 <br/> echo ~+ # pwd |
| ? | 字符串扩展 | ? 字符代表文件路径里面的任意*单个*字符，不包括空字符 | 有几个 ?，就匹配几个字符 |
| * | 字符串扩展 | * 字符代表文件路径里面的任意数量的任意字符，包括零字符 | * 不会匹配隐藏文件 <br/> ls .* # 输出所有的隐藏文件 <br/> echo .[!.]* # 匹配隐藏文件，同时排除 . 和 .. 这两个特殊的隐藏文件 <br/> ls \*/\*.txt # 匹配子目录 |
| [] | 方括号扩展 | 匹配 [] 号中多个字母或数字中的任意一个 | [^abc] # 非 abc 以为的字母 <br/> [!abc] # 非 abc 以为的字母 <br/> [-aeiou] [aeiou-] # 连字符 - 只能放开开头或结尾 |
| [start-end] 扩展 | 匹配一个连续的范围 | | [a-z] # 所有的小写字母 <br/> [A-Z] # 所有的大写字母 <br/> [a-zA-Z0-9] # 所有的小写字母、大写字母、数字 <br/> [!a-zA-Z] # 匹配非英文的字符 |
| [[:class:]], [![:class:]] | 扩展成某一类特定字符串之中的一个 ||  |
| {} | 大括号扩展 | 分别扩展成大括号里面的所有值，各个值之间使用逗号分隔 | echo {1,2,3} # 1 2 3 <br/> echo d{a,e,i,u,o}g # dag deg dig dug dog <br/> echo  {j{p,pe}g,png} # 大括号嵌套 jpg jpeg png |
| {start..end} {start..end..step} | 扩展成一个连续序列 | | mkdir {2007..2009}-{01..12} # 新建一系列目录 |
| $, ${} | 变量扩展 | Bash 将已 $ 为开头的词视为变量 | echo $SHELL <br/> echo ${SHELL} <br/> echo ${?S*} # 返回所欲匹配给定字符串 S 的变量名 |
| $(...) | 子命令扩展 | 扩展成另一个命令的运算结果，该命令的所有输出都会作为返回值 | echo $(date) <br/> echo `date` <br/> echo $(echo $SEHLL) <br/> echo $(ls $(pwd))|
| $((...)) | 算数扩展 | | echo $((2+2)) # 4 |
|||||
|||||

## 字符类常用列表

|  字符类 | 含义 | 示例 |
|:---|:---|:---|
| [[:alnum:]] | 匹配任意英文字母与数字 | |
| [[:alpha:]] | 匹配任意英文字母 |
| [[:blank:]] | 空格和 Tab 键 |
| [[:cntrl:]] | ASCII 码 0-31 不可打印字符 |
| [[:digit:]] | 匹配任意数字 0-9 |
| [[:xdigit:]] | 16 进制字符（A-F、a-f、0-9）|
| [[:graph:]] | A-Z、a-z、0-9 和标点符号 |
| [[:lower:]] | 匹配任意小写字母 a-z |
| [[:upper:]] | 匹配任意大写字母 A-Z |
| [[:print:]] | ASCII 码 32-127 的可打印字符 |
| [[:punct:]] | 标点符号（除 A-Z、a-z、0-9的可打印字符）|
| [[:space:]] | 空格、Tab、LF（10）、VT（11）、FF（12）、CR（13） |

## 使用注意点

1. 通配符先解释，后执行
1. 文件名扩展在不匹配时，会原样输出
1. 只适用于单层路径
1. 文件名可以使用通配符

## 量词语法

量词语法用来控制模式匹配的次数。它只有在 **extglob** 参数打开的情况下才能使用，否则会报预错误。


| 语法 | 含义 | 示例 | 备注 |
|:---|:---|:---|:---|
| ?(pattern-list) | 匹配零个或一个模式 | 0～1 | ls abc?(.)txt |
| *(pattern-list) | 匹配零个或多个模式 | 0～n |
| +(pattern-list) | 匹配一个或多个模式 | 1~n |
| @(pattern-list) | 只匹配一个模式 | 1 |
| !(pattern-list) | 匹配给定模式以外的任何内容 ||

## shopt 命令

shopt 命令可以调整 Bash 的行为。

| 语法 | 含义 |
|:---|:---|
| shopt -n <option name> | 打开某个参数 |
| shopt -s <option name> | 关闭某个参数 |
| shopt <option name> | 查看某个参数的状态 |

option 列表

| 参数 | 含义 | 示例 |
|:---|:---|:---|
| dotglob | 是否包含隐藏文件 |
| nullglob | 通配符不匹配任何文件名时，返回空字符 |
| failglob | 通配符不匹配任何文件名时，会报错 |
| extglob | 使 Bash 支持 ksh 的一些扩展预发 |
| nocaseglob | 通配符不支持大小写 |
| globstar | 参数可以使用 ** 匹配零个或多个子目录 | ls *.txt */*.txt */*/*.txt <br/> ls **/*.txt |
| | |
